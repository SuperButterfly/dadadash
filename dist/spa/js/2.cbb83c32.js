(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"713b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},[a("q-drawer",{attrs:{"mini-width":50,width:250,mini:e.showAdminDrawerStick,breakpoint:1400,"content-class":"",elevated:""},model:{value:e.showAdminDrawer,callback:function(t){e.showAdminDrawer=t},expression:"showAdminDrawer"}},[a("q-scroll-area",{staticClass:"fit"},[a("q-list",{staticClass:"bg-black"},[a("q-item",{attrs:{clickable:""}},[a("q-item-section",{staticClass:"text-white",staticStyle:{"text-transform":"capitalize","font-weight":"bold","font-size":"22px","text-align":"center"},on:{click:function(t){return e.$router.push("/admin")}}},[e._v("\n              DASHBOARD\n            ")]),a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{attrs:{flat:"",size:"xs",color:"white",icon:"menu"},on:{click:function(t){e.showAdminDrawerStick=!e.showAdminDrawerStick}}})],1)],1)],1),a("q-list",[a("q-expansion-item",{attrs:{"expand-separator":"",label:"Database",value:!0,"expand-icon-class":"text-white",icon:"fas fa-database"}},[a("q-list",[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{"inset-level":1,clickable:""},on:{click:function(t){return e.$router.push("/tables")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"fas fa-table"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                    Tables\n                  ")])],1)],1)],1)],1),a("q-item",{attrs:{clickable:""},on:{click:function(t){return e.$router.push("/workspace")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"fas fa-briefcase"}})],1),a("q-item-section",[e._v("\n              Workspace\n            ")])],1),a("q-expansion-item",{attrs:{"expand-icon-class":"text-white",value:!0,"expand-separator":"",icon:"fas fa-user",label:"Users"}},[a("q-list",[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{"inset-level":1,clickable:""},on:{click:function(t){return e.$router.push("/user/profile")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"fas fa-id-card"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                    Profile\n                  ")])],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{"inset-level":1,clickable:""},on:{click:function(t){return e.$router.push("/users")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"fas fa-address-book"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                    Accounts\n                  ")])],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{"inset-level":1,clickable:""},on:{click:function(t){return e.$router.push("/groups")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"fas fa-users"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                    Groups\n                  ")])],1)],1)],1)],1),a("q-expansion-item",{attrs:{"expand-icon-class":"text-white",value:!0,"expand-separator":"",icon:"fas fa-archive",label:"Storage"}},[a("q-list",[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{"inset-level":1,clickable:""},on:{click:function(t){return e.$router.push("/cloudstore")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"fas fa-bars"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                    Cloud stores\n                  ")])],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{"inset-level":1,clickable:""},on:{click:function(t){return e.$router.push("/cloudstore/sites")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"fas fa-desktop"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                    Sites\n                  ")])],1)],1)],1)],1),a("q-expansion-item",{attrs:{"expand-icon-class":"text-white",value:!0,"expand-separator":"",icon:"fas fa-bolt",label:"Integrations"}},[a("q-list",[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{"inset-level":1,clickable:""},on:{click:function(t){return e.$router.push("/integrations/spec")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"fas fa-plug"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                    API Catalogue\n                  ")])],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{"inset-level":1,clickable:""},on:{click:function(t){return e.$router.push("/integrations/actions")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"fas fa-wrench"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                    Actions\n                  ")])],1)],1)],1)],1),a("q-expansion-item",{attrs:{"expand-icon-class":"text-white",value:!0,"expand-separator":"",icon:"fas fa-book",label:"Documentation"}},[a("q-list",[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{"inset-level":1,clickable:""},on:{click:function(t){return e.$router.push("/tables/apidocs")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"fas fa-book"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                    JSON API docs\n                  ")])],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{"inset-level":1,clickable:""},on:{click:function(t){return e.$router.push("/tables/graphql")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"fas fa-book"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                    GraphQL docs\n                  ")])],1)],1)],1)],1)],1),a("q-list",[a("q-item",{attrs:{clickable:""},on:{click:function(t){return e.logout()}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{color:"negative",name:"fas fa-power-off"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                Logout\n              ")])],1)],1)],1)],1)],1),e.isAdmin||e.isUser?a("router-view"):e._e(),e.loaded?a("user-header-bar",{attrs:{buttons:{before:[],after:[]},"on-back":!1}}):e._e()],1)},n=[],r=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("c47a")),o=a.n(r),s=a("2f62");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}a("14b7");var u={name:"MainLayout",computed:{fileDrawerWidth:function(){return window.screen.availWidth}},components:{},data:function(){return l(l({showHelp:!1,showAdminDrawer:!1,showAdminDrawerMini:!0,showAdminDrawerStick:!1},Object(s["c"])(["loggedIn","drawerLeft","authToken","decodedAuthToken","userGroupTable"])),{},{essentialLinks:[],drawer:!1,userDrawer:!1,loaded:!1,miniState:!0,isAdmin:!1,isUser:!1})},mounted:function(){var e=this;if(console.log("Mounted main layout"),e.decodedAuthToken()){var t=e.decodedAuthToken(),a=1e3*t.exp<(new Date).getTime();if(console.log("Decoded auth token",a,t),a)return e.$q.notify({message:"Authentication has expired, please login again"}),e.setDecodedAuthToken(null),void e.logout();e.loadModel(["cloud_store","user_account","usergroup","world","action","site","integration"]).then((function(){e.loaded=!0,e.getDefaultCloudStore(),e.loadData({tableName:"user_account"}).then((function(t){var a=t.data;console.log("Users: ",a),2097057!==a[0].permission&&e.decodedAuthToken()&&e.executeAction({tableName:"world",actionName:"become_an_administrator"}).then((function(t){e.$q.notify({message:"You have become the administrator of this instance"})})).catch((function(e){console.log("Failed to become admin",e)})),e.isAdmin=!0,e.showAdminDrawer=!0,e.isUser=!1}))})).catch((function(t){console.log("Failed to load model for cloud store",t),e.$q.notify({message:"Failed to load model for cloud store"})}))}else e.logout()},methods:l(l({},Object(s["b"])(["getDefaultCloudStore","loadModel","executeAction","loadData","setDecodedAuthToken"])),{},{logout:function(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.$router.push("/login"),window.location=window.location}})},m=u,d=a("2877"),p=a("4d5a"),f=a("9404"),b=a("4983"),q=a("1c1c"),v=a("66e5"),w=a("4074"),h=a("9c40"),k=a("3b73"),g=a("0016"),x=a("0170"),A=a("714f"),D=a("eebe"),O=a.n(D),_=Object(d["a"])(m,i,n,!1,null,null,null);t["default"]=_.exports;O()(_,"components",{QLayout:p["a"],QDrawer:f["a"],QScrollArea:b["a"],QList:q["a"],QItem:v["a"],QItemSection:w["a"],QBtn:h["a"],QExpansionItem:k["a"],QIcon:g["a"],QItemLabel:x["a"]}),O()(_,"directives",{Ripple:A["a"]})}}]);