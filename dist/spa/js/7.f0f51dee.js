(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},"3edf":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.loaded?o("router-view",{on:{logout:function(t){return e.logout()}}}):e._e()},r=[],c=(o("8e6e"),o("8a81"),o("ac6a"),o("cadf"),o("06db"),o("456d"),o("a34a")),a=o.n(c),u=(o("96cf"),o("c973")),i=o.n(u),l=o("9523"),d=o.n(l),s=o("2f62");function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){d()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}o("14b7");var w={name:"MainLayout",computed:{fileDrawerWidth:function(){return window.screen.availWidth}},components:{},data:function(){return p(p({showHelp:!1,showDrawerFull:!1,showAdminDrawerMini:!1,showAdminDrawerStick:!1},Object(s["c"])(["loggedIn","drawerLeft","authToken","decodedAuthToken"])),{},{essentialLinks:[],drawer:!1,userDrawer:!0,loaded:!1,miniState:!0,isAdmin:!1,isUser:!1})},mounted:function(){var e=this;if(console.log("Mounted main layout"),e.decodedAuthToken()){var t=e.decodedAuthToken(),o=1e3*t.exp<(new Date).getTime();if(console.log("Decoded auth token",o,t),o)return e.$q.notify({message:"Authentication has expired, please login again"}),e.setDecodedAuthToken(null),e.logout(),void this.$router.push("/login")}e.loadModel(["cloud_store","user_account","usergroup","world","action","site","integration","calendar","document"]).then(i()(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loaded=!0,e.getDefaultCloudStore(),e.loadData({tableName:"user_account"}).then((function(t){var o=t.data;console.log("Users: ",o),e.isUser=!0}));case 3:case"end":return t.stop()}}),t)})))).catch((function(t){console.log("Failed to load model for cloud store",t),e.$q.notify({message:"Failed to load model for cloud store"})}))},methods:p(p({},Object(s["b"])(["getDefaultCloudStore","loadModel","executeAction","loadData","setDecodedAuthToken"])),{},{logout:function(){localStorage.removeItem("token"),localStorage.removeItem("user")}})},h=w,g=(o("ef68"),o("2877")),m=Object(g["a"])(h,n,r,!1,null,null,null);t["default"]=m.exports},4:function(e,t){},5:function(e,t){},6:function(e,t){},"62a7":function(e,t,o){},7:function(e,t){},8:function(e,t){},9:function(e,t){},ef68:function(e,t,o){"use strict";var n=o("62a7"),r=o.n(n);r.a}}]);