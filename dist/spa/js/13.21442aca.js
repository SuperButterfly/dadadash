(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{2837:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},[a("router-view")],1)},o=[],r=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("967e")),c=a.n(r),u=(a("7f7f"),a("96cf"),a("fa84")),s=a.n(u),l=(a("28a5"),a("c47a")),i=a.n(l),m=a("2f62"),d=a("bf3a");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){i()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return a.indexOf(e)===t}var w={name:"GuestLayout",components:{BaseViewContainer:d["default"]},methods:b({},Object(m["b"])(["loadTable","loadModel","loadData"])),meta:function(){return{title:this.currentItem?this.currentItem.document_name:"Login"}},computed:{workspaces:function(){var e=this,t=this.documents.map((function(t){var a=t.document_path.split("/")[1];return e.workspaceMap[a]||(e.workspaceMap[a]={items:[]}),e.workspaceMap[a].items.push(t),a})).filter(f);return t.sort((function(e,t){return e.toLowerCase()>t.toLowerCase()})),console.log("Workspace name",t),t}},mounted:function(){console.log("mounted guest layout",this.documentTable());var e=this;e.$q.loading.show(),e.loadModel(["world","document"]).then(s()(c.a.mark((function t(){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loadData({tableName:"document",params:{page:{size:10},query:JSON.stringify([{column:"mime_type",operator:"like",value:"workspace/%"}]),included_relations:"document_content"}}).then((function(t){e.$q.loading.hide(),console.log("document table is public",t.data),e.documents=t.data,e.documents.length>0&&(e.leftDrawerOpen=!0);for(var a=0;a<e.documents.length;a++){var n=e.documents[a],o=n;if(n.document_content)try{var r=JSON.parse(atob(n.document_content[0].contents));o=b(b({},n),r)}catch(c){console.log("Failed to read contents of item",c,n),o=n}o.targetTable||(o.attributes&&o.attributes.TableName?o.targetTable=e.tableMap[o.attributes.TableName]:o.target&&o.target.name&&(o.targetTable=e.tableMap[o.target.name])),e.baseItemConfigMap[n.document_name]=o,"workspace/root"!==n.mime_type&&"workspace/base"!==n.mime_type&&null===e.currentItem&&(e.$route.params.document_name?e.$route.params.document_name===n.document_name&&(e.currentItem=n):(e.currentItem=n,e.$router.push("/guest/"+n.document_name)))}})).catch((function(t){e.$q.loading.hide(),console.log("Document table is not public",t)}));case 1:case"end":return t.stop()}}),t)})))).catch((function(t){e.$q.loading.hide(),console.log("No models available, lets wait for login",t)}))},data:function(){return b({leftDrawerOpen:!1,baseItemConfigMap:{},currentItem:null,baseItemComponentMap:{view:"edit-data-table",table:"edit-data-table",document:"document-editor",folder:"file-browser",spreadsheet:"spreadsheet-editor",calendar:"calendar-view"},rightDrawerOpen:!1,workspaceMap:{},documents:[]},Object(m["c"])(["documentTable","baseItemTypes"]))}},g=w,h=a("2877"),O=a("4d5a"),y=a("eebe"),v=a.n(y),_=Object(h["a"])(g,n,o,!1,null,null,null);t["default"]=_.exports;v()(_,"components",{QLayout:O["a"]})}}]);